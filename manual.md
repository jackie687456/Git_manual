# gitマニュアル
## はじめに
このマニュアルは、全くGitやGitHubについて知らない状態で以下の本を読み、その内容を自分のための備忘録としてまとめたものとなります。このサイトのみでGitやGitHubの全てを理解できるというよりは、すでに何らかのコンテンツで勉強したことのある方がその内容を思い出すために使って頂けると良いかと思います。

読んだ本　＝＞</br>
リブロワークス（2020）『たった　１日で基本が身につく！　Git超入門』, 技術評論社

![たった　１日で基本が身につく！　Git超入門](img/GitChouNyumon.jpg)

なお、記事の引用の際には、このGitHubのリンクを貼って頂くようお願いいたします。



## 環境
作業環境は以下になります。
- Windows10 Home
- git version 2.30.0.windows.2
- GitHub Desktop Version 2.6.2



## gitの使い方（ローカル）
### 用語
- **コミット**: 変更を履歴として保存
- **ステージ**: 変更をコミット待機状態にする
- **Undo**: 直前のコミットを取り消す（そもそもコミットしない）
- **リバート**: 直前のコミットを取り消す（コミットによる変更を打ち消すコミット）

### VSコードで使う
「変更をステージ」⇒「コミット」



## gitの使い方（リモート）
### 用語
- **リモートリポジトリ**: ネットワーク上のリポジトリ
- **クローン**: リモートリポジトリを複製してローカルリポジトリを作成する（*ファイル名に日本語を使わない！*）
- **フェッチ**: リモートリポジトリの状態を確認
- **プル**: リモートリポジトリから最新の変更履歴をローカルリポジトリにダウンロード
- **プッシュ**: ローカルリポジトリから最新の変更履歴をリモートリポジトリにアップロード
- **コラボレーター**: 共同編集者
- **マージ**: 全員のリポジトリが同じ状態になるように統合し、**マージコミット**を作成
- **無視ファイル(.gitignore)**: リポジトリに含めるべきでないファイル（例えば一時ファイル）についての設定を記述
- **コンフリクト**: 並行で作業している場合に起こる変更の競合
- **ブランチ**: コミットの履歴を枝分かれさせる機能
- **プルリクエスト**: ブランチ上で行った編集結果を、共同作業者に確認してもらってからマージする機能。GitHub上のタブから作成やレビューができる。
- **イシュー**: アプリのバグ報告などを行うための掲示板のようなもの。GitHub上のタブから作成やコメントができる。

### 操作の流れ
1. リモートリポジトリをローカルリポジトリにクローン
1. 作業用のブランチをリモートリポジトリに作成し、フェッチしてローカルリポジトリに取り込む
1. 作業用のブランチ上で、ローカルリポジトリに変更をコミットする
1. 作業用のブランチ上で、フェッチ⇒プル⇒プッシュ（*必ずこの順番*）
1. 一通りの作業が終わったら、GitHub上でプルリクエストを作成する
1. 共同編集者（特にレビューを依頼された人）がレビューをし、変更を依頼（Request changes）したり、承認（Approve）したりする。変更を依頼された場合には、それに応じた変更をコミットし、それを伝えるコメントをして承認を求める。
1. 承認が得られたら、プルリクエストをマージする（この作業はどのユーザーが行っても構わない）



## コマンドラインからのGitの操作
GitをWindowsで実行するために**Git Bash**を利用する

### コマンドの一覧
|内容|相当するGUIでの操作|コマンド
|--|--|--
|現在の状態を確認 |\<GitHub Desktop\> Changesタブ |$ git status
|コミット履歴を確認 |\<GitHub Desktop\> Historyタブ |$ git log
|ディレクトリをリポジトリ化 | |$ git init
|変更をコミット対象にする（ステージング） |\<GitHub Desktop\> Changesタブでファイルにチェックを付ける </br>\<VSCode\> 変更をステージ |$ git add
|全ての変更をコミット対象にする | |$ git add -A
|変更の差分を表示 |\<GitHub Desktop\> Changesタブ |$ git diff
|コミット対象（ステージングエリア）の変更の差分を表示 | |$ git diff --cached
|ステージングされた変更をコミット |\<GitHub Desktop\> Commit to (ブランチ名) の操作 |$ git commit
|ステージングされた変更をコミット（コミットメッセージを入力） | |$ git commit --m "コミットメッセージ"
|直前のコミットを取り消す **\*1** | |$ git reset
|直前のコミットを取り消して、すぐにコミットをやり直せる状態にする |\<GitHub Desktop\> Undo |$ git reset --soft HEAD^
|リバート |\<GitHub Desktop\> Historyタブ Revert this commit |$ git revert \<コミットID\>
|GitHub上に作成したリモートリポジトリと連携（HTTPSを利用する場合） | |$ git remote add origin \<https://...（GitHubからコピーしたURL）\>
|GitHub上に作成したリモートリポジトリと連携（SSHを利用する場合） **\*2** | |$ git remote add origin \<git@github.com:...（GitHubからコピーしたパス）\>
|リモートリポジトリの指定を削除 | |$ git remote remove origin
|リモートリポジトリにプッシュ |\<GitHub Desktop\> Push origin |$ git push origin \<ブランチ名\>
|ブランチを上流ブランチに設定してリモートリポジトリにプッシュ | |$ git push -u origin \<ブランチ名\>
|フェッチ（リモートリポジトリの状態を確認） |\<GitHub Desktop\> Fetch origin |$ git fetch
|リモートリポジトリからプル |\<GitHub Desktop\> Pull origin |$ git pull
|ブランチの作成 |\<GitHub Desktop\> Current branchタブのNew branch |$ git branch \<ブランチ名\>
|ブランチの切り替え |\<GitHub Desktop\> Current branchタブからブランチを選択 |$ git checkout \<ブランチ名\>
|ブランチをmainブランチに取り込む |\<GitHub Desktop\> Mainブランチに切り替えてから、BranchタブからMerge into current branch...を選択し、取り込むブランチを指定する |$ git checkout main</br>$ git merge \<ブランチ名\>
|ブランチを削除 |\<GitHub Desktop\> BranchタブからDelete...を選択 |$ git branch -d \<ブランチ名\>

\*1 オプションによって様々な使い方ができるので、別途調べることを推奨します。以下のサイトが参考になると思われます。↓</br>
[git reset コマンドの使い方と、主要オプションまとめ](https://www-creators.com/archives/1069) </br>
ただし、未コミットの変更をresetしてしまうと、***完全に消えてしまってもとに戻せない***ので注意！ </br>

より詳細な情報が必要な場合には、以下のGit公式ドキュメントも参照してください。↓</br>
[Git - git-reset Documentation](https://git-scm.com/docs/git-reset)

\*2 SSHによる通信でコマンドラインの操作を行うためには、事前に秘密鍵/公開鍵の生成と公開鍵のGitHubへの登録が必要。$ ssh-keygen でssh鍵を作成したら、公開鍵の中身をGitHubに登録する。ユーザーアイコンの（Settings）=>（SSH and GPS keys）=> （New SSH key）から、Titleを入力した上で公開鍵の中身をコピー&ペーストで貼り付け、（Add SSH key）をクリックすることで登録できる。


## マークダウン記法の使い方
- 行頭の"**#**"が見出しを表す。
- 一行空けると改行される。
- "- "または"* "で箇条書き。
- "半角数字. "で数字付き箇条書き
- "|"と"-"の組み合わせで表を出力
- htmlも使える。例えば表の中の改行に</ br>
- 画像の挿入は"!\[代替文字列](画像のパス)"
- ハイパーリンクは"\[リンク文字列](url)"
